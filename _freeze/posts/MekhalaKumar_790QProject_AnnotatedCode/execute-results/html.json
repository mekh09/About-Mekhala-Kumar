{
  "hash": "76246bc096465613948bb0f23d9b3daa",
  "result": {
    "markdown": "---\ntitle: \"Route to Happiness: Unravelling the Link between Transportation and Quality of Life\"\nauthor: \"Mekhala Kumar\"\neditor: visual\ndate: \"2023-12-14\"\n---\n\n\n\n## Primary Research Question\n\na.  How do modes of transport impact satisfaction of life?\nb.  How do modes of transport affect one's satisfaction with quality of\n    life?\n\n## Reading in data\nDataset- National Community Livability Survey\n\n::: {.cell}\n\n```{.r .cell-code}\npublictransit<-read_excel(\"_data/Deliverable-3b-NCLS-Dataset.xlsx\",sheet=\"Data\")\nbackup<-publictransit\n# Selecting the required variables\npublictransit<-publictransit%>%dplyr::select(Hhveh,Walkrate,Transitrate,transitavail,transitavailns,LifeSat,Comqol,Hhincscale,AgeScale,Edscale,Male,White,Black,AIAN,Hawaiian,Asian,Otherrace,ZipCode,Male)\nsummary(publictransit)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    Hhveh             Walkrate         Transitrate        transitavail      \n Length:994         Length:994         Length:994         Length:994        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n transitavailns       LifeSat             Comqol           Hhincscale       \n Length:994         Length:994         Length:994         Length:994        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n   AgeScale           Edscale               Male           White          \n Length:994         Length:994         Min.   :0.0000   Length:994        \n Class :character   Class :character   1st Qu.:0.0000   Class :character  \n Mode  :character   Mode  :character   Median :0.0000   Mode  :character  \n                                       Mean   :0.4125                     \n                                       3rd Qu.:1.0000                     \n                                       Max.   :1.0000                     \n    Black               AIAN             Hawaiian            Asian          \n Length:994         Length:994         Length:994         Length:994        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n  Otherrace            ZipCode     \n Length:994         Min.   : 1201  \n Class :character   1st Qu.:30532  \n Mode  :character   Median :57617  \n                    Mean   :56044  \n                    3rd Qu.:83276  \n                    Max.   :99921  \n```\n:::\n\n```{.r .cell-code}\n#Assigning missing values and transforming variables wherever necessary\npublictransit[publictransit==\".\"]<-NA\npublictransit$lifesat<-as.numeric(publictransit$LifeSat)\npublictransit$qol<-as.factor(publictransit$Comqol)\npublictransit$hhveh<-as.numeric(publictransit$Hhveh)\npublictransit$walkrate<-as.numeric(publictransit$Walkrate)\npublictransit$transitrate<-as.numeric(publictransit$Transitrate)\npublictransit$ptavail<-as.numeric(publictransit$transitavail)\npublictransit$ptavailns<-as.numeric(publictransit$transitavailns)\npublictransit$male<-as.factor(publictransit$Male)\n\npublictransit<-publictransit%>%dplyr::select(-c(LifeSat,Comqol,Hhveh,Walkrate,Transitrate,transitavail,transitavailns,Male))\n# Summary Statistics at a Glance\nskim(publictransit)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |              |\n|:------------------------|:-------------|\n|Name                     |publictransit |\n|Number of rows           |994           |\n|Number of columns        |18            |\n|_______________________  |              |\n|Column type frequency:   |              |\n|character                |9             |\n|factor                   |2             |\n|numeric                  |7             |\n|________________________ |              |\n|Group variables          |None          |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|Hhincscale    |        57|          0.94|   1|   1|     0|        8|          0|\n|AgeScale      |         3|          1.00|   1|   1|     0|        8|          0|\n|Edscale       |         2|          1.00|   1|   1|     0|        6|          0|\n|White         |        11|          0.99|   1|   1|     0|        2|          0|\n|Black         |        11|          0.99|   1|   1|     0|        2|          0|\n|AIAN          |        11|          0.99|   1|   1|     0|        2|          0|\n|Hawaiian      |        11|          0.99|   1|   1|     0|        2|          0|\n|Asian         |        11|          0.99|   1|   1|     0|        2|          0|\n|Otherrace     |        11|          0.99|   1|   1|     0|        2|          0|\n\n\n**Variable type: factor**\n\n|skim_variable | n_missing| complete_rate|ordered | n_unique|top_counts                    |\n|:-------------|---------:|-------------:|:-------|--------:|:-----------------------------|\n|qol           |         5|          0.99|FALSE   |        5|4: 470, 5: 281, 3: 133, 2: 83 |\n|male          |         0|          1.00|FALSE   |        2|0: 584, 1: 410                |\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|     mean|       sd|   p0|      p25|   p50|   p75|  p100|hist  |\n|:-------------|---------:|-------------:|--------:|--------:|----:|--------:|-----:|-----:|-----:|:-----|\n|ZipCode       |         0|          1.00| 56044.03| 29326.49| 1201| 30531.75| 57617| 83276| 99921|▅▅▅▅▇ |\n|lifesat       |         3|          1.00|     7.71|     1.97|    0|     7.00|     8|     9|    10|▁▁▂▇▇ |\n|hhveh         |         8|          0.99|     1.94|     0.84|    0|     1.00|     2|     3|     3|▁▆▁▇▆ |\n|walkrate      |        22|          0.98|     3.17|     1.08|    1|     3.00|     3|     4|     5|▂▃▇▆▂ |\n|transitrate   |        20|          0.98|     2.46|     1.20|    1|     1.00|     2|     3|     5|▇▆▇▅▂ |\n|ptavail       |        18|          0.98|     0.55|     0.50|    0|     0.00|     1|     1|     1|▆▁▁▁▇ |\n|ptavailns     |        18|          0.98|     0.08|     0.26|    0|     0.00|     0|     0|     1|▇▁▁▁▁ |\n:::\n\n```{.r .cell-code}\npublictransit <- publictransit[complete.cases(publictransit), ]\n```\n:::\n\n\n\n## Primary Explanatory Independent Variables\n\n1.  Hhveh- How many working vehicles (cars, trucks, and motorcycles) are\n    available in your household? This ranges from 0 to 3. \n2.  Walkrate- Rate the quality of walkability/accessibility in your\n    community (scale 1-5, very poor to very good).\n3.  Transitqual- I created this variable based on transitavail (whether\n    there is public transit) and transitrate (quality of public\n    transit).The value=0, if there is no public transit and then for\n    those who do have public transit in their community, the values\n    range from 1-5. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Creating the perceived public transit quality variable based on transitavail and transitrate\npublictransit<-publictransit%>%\n  mutate(pt_qual=case_when(\n    ptavail==0~0,\n    ptavail==1 & transitrate==1~1,\n    ptavail==1 & transitrate==2~2,\n    ptavail==1 & transitrate==3~3,\n    ptavail==1 & transitrate==4~4,\n    ptavail==1 & transitrate==5~5\n  ))\n# Sanity check for new perceived public transit quality variable created\ntable(publictransit$ptavail)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  0   1 \n386 490 \n```\n:::\n\n```{.r .cell-code}\npublictransit%>%\n  dplyr::select(ptavail,transitrate,pt_qual)%>%\n  head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n  ptavail transitrate pt_qual\n    <dbl>       <dbl>   <dbl>\n1       1           4       4\n2       1           3       3\n3       1           1       1\n4       1           3       3\n5       0           1       0\n6       0           2       0\n```\n:::\n\n```{.r .cell-code}\ntypeof(publictransit$pt_qual)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"double\"\n```\n:::\n\n```{.r .cell-code}\n# Converting public transit quality to factor\npublictransit$ptqual<-as.factor(publictransit$pt_qual)\npublictransit<-publictransit%>%dplyr::select(-c(pt_qual,ptavail,ptavailns,transitrate))\n\n# Creating factor type variables for number of vehicles and walkability\npublictransit$walk_fac<-as.factor(publictransit$walkrate)\npublictransit$car_fac<-as.factor(publictransit$hhveh)\n```\n:::\n\n\n### For the control variable- geographic region\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Taking data from the package zipcodeR\nzip<-zip_code_db\n# Selecting the required variables from the zipcode dataset\nzip<-zip%>%dplyr::select(zipcode,population,population_density)\n# Comparing the zipcode information in the 2 datasets\ntypeof(publictransit$zipcode)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Unknown or uninitialised column: `zipcode`.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"NULL\"\n```\n:::\n\n```{.r .cell-code}\ntypeof(zip$zipcode)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"character\"\n```\n:::\n\n```{.r .cell-code}\npublictransit%>%distinct(ZipCode)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 771 × 1\n   ZipCode\n     <dbl>\n 1   77447\n 2   87020\n 3   96052\n 4   76571\n 5   63125\n 6   59643\n 7   45327\n 8   81401\n 9   76689\n10    3076\n# ℹ 761 more rows\n```\n:::\n:::\n\n\n## Control Variables\n\n1.  Geographic region- Urban/urban cluster/rural\n\n2.  hhincscale- Income\n\n3.  AgeScale- Age \n\n4.  Edscale- Education\n\n5.  Race- White,Black,AIAN,Hawaiian,Asian,Otherrace- converted to binary\n\n6.  Male- female=0,male=1- binary\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Checking distribution in the race variable and variable transformation\ntable(publictransit$White)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  0   1 \n 80 796 \n```\n:::\n\n```{.r .cell-code}\npublictransit<-publictransit%>%\n  mutate(poc=case_when(\n           White==1~0,\n           White==0~1))\n table(publictransit$poc)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  0   1 \n796  80 \n```\n:::\n\n```{.r .cell-code}\npublictransit<-publictransit%>%dplyr::select(-c(White,Black,AIAN,Hawaiian,Asian,Otherrace))\n\n# Merging the 2 datasets (Zipcode and National Community Livability survey)\npublictransit<-publictransit%>%\n  rename(zipcode=ZipCode)\nzip$zipcode<-as.numeric(zip$zipcode)\n\npublictransit<-publictransit%>%\n    left_join(zip,by=\"zipcode\")\n# Creating the geographic region variable based on the Census definition\npublictransit<-publictransit%>%\n  mutate(urb_rur=case_when(\n    population<2500~\"Rural\",\n    population>=2500 & population<50000~\"Urban cluster\",\n    population>=50000~\"Urban\"\n  ))\n# because some zipcodes don't have associated population values- those values are removed\nsum(is.na(publictransit$urb_rur))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 15\n```\n:::\n\n```{.r .cell-code}\npublictransit<-publictransit %>%\n  filter(!is.na(urb_rur))\npublictransit<-publictransit%>%\n  mutate(type=factor(urb_rur, levels=c(\"Rural\",\"Urban cluster\",\"Urban\")))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(publictransit)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [861 × 17] (S3: tbl_df/tbl/data.frame)\n $ Hhincscale        : chr [1:861] \"6\" \"5\" \"3\" \"6\" ...\n $ AgeScale          : chr [1:861] \"2\" \"5\" \"4\" \"5\" ...\n $ Edscale           : chr [1:861] \"4\" \"2\" \"2\" \"3\" ...\n $ zipcode           : num [1:861] 77447 87020 96052 76571 63125 ...\n $ lifesat           : num [1:861] 10 9 5 8 5 9 8 8 8 10 ...\n $ qol               : Factor w/ 5 levels \"1\",\"2\",\"3\",\"4\",..: 5 4 3 4 2 4 5 4 5 3 ...\n $ hhveh             : num [1:861] 2 2 3 2 1 2 1 1 3 2 ...\n $ walkrate          : num [1:861] 2 3 4 4 1 3 3 4 3 3 ...\n $ male              : Factor w/ 2 levels \"0\",\"1\": 1 1 2 2 1 1 2 2 1 1 ...\n $ ptqual            : Factor w/ 6 levels \"0\",\"1\",\"2\",\"3\",..: 5 4 2 4 1 1 1 5 1 5 ...\n $ walk_fac          : Factor w/ 5 levels \"1\",\"2\",\"3\",\"4\",..: 2 3 4 4 1 3 3 4 3 3 ...\n $ car_fac           : Factor w/ 4 levels \"0\",\"1\",\"2\",\"3\": 3 3 4 3 2 3 2 2 4 3 ...\n $ poc               : num [1:861] 0 0 0 0 0 0 0 0 0 0 ...\n $ population        : int [1:861] 11872 11347 1460 6790 32201 437 8917 22437 3996 12897 ...\n $ population_density: num [1:861] 119 11 19 57 3242 ...\n $ urb_rur           : chr [1:861] \"Urban cluster\" \"Urban cluster\" \"Rural\" \"Urban cluster\" ...\n $ type              : Factor w/ 3 levels \"Rural\",\"Urban cluster\",..: 2 2 1 2 2 1 2 2 2 2 ...\n```\n:::\n\n```{.r .cell-code}\n# Transforming variables wherever necessary\npublictransit$hhincscale<-as.numeric(publictransit$Hhincscale)\npublictransit$age<-as.numeric(publictransit$AgeScale)\npublictransit$educ<-as.numeric(publictransit$Edscale)\npublictransit<-publictransit%>%dplyr::select(-c(Hhincscale,AgeScale,Edscale,zipcode,population,population_density,urb_rur))\n```\n:::\n\n## Dependent Variables\n\n1.  LifeSat- All things considered, how satisfied are you with your life\n    as a whole these days? (Scale: 0-10)\n2.  Comqol- How satisfied are you with the quality-of-life in your\n    community? (Scale: 1-5)\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plotting distributions for the dependent variables\nggplot(publictransit,aes(lifesat))+\n  geom_histogram(binwidth=1)+\n  geom_text(stat=\"count\",aes(label = ..count..),vjust=0.02)+\n  labs(title=\"Distribution of Life Satisfaction\",x=\"Life Satisfaction\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.\nℹ Please use `after_stat(count)` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](MekhalaKumar_790QProject_AnnotatedCode_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\nmean(publictransit$lifesat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 7.681765\n```\n:::\n\n```{.r .cell-code}\nvar(publictransit$lifesat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3.840469\n```\n:::\n\n```{.r .cell-code}\nggplot(publictransit,aes(qol))+\n  geom_bar()+\n  geom_text(stat=\"count\",aes(label = ..count..),vjust=0.01)+\n  labs(title=\"Distribution of Satisfaction with Quality of Life in the Community\",x=\" Satisfaction with Quality of Life\" )\n```\n\n::: {.cell-output-display}\n![](MekhalaKumar_790QProject_AnnotatedCode_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n:::\n\n# Distributions of the Independent Variables\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(publictransit$hhveh)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  0   1   2   3 \n 27 235 343 256 \n```\n:::\n\n```{.r .cell-code}\ntable(publictransit$walkrate)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  1   2   3   4   5 \n 71 149 296 253  92 \n```\n:::\n\n```{.r .cell-code}\ntable(publictransit$ptqual)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  0   1   2   3   4   5 \n382  47  92 179 117  44 \n```\n:::\n:::\n\n# Models\n## Final Models\n\n::: {.cell}\n\n```{.r .cell-code}\n# Linear regression with interaction effects\nlm1<-lm(lifesat~hhveh*ptqual+type*ptqual+walk_fac+ hhincscale+age+educ+poc+male, data=publictransit)\n# Ordinal Logistic Regression\nlogit5<-polr(qol~hhveh*ptqual+type*ptqual+walkrate+ hhincscale+age+educ+poc+male, data=publictransit,method=\"logistic\")\n```\n:::\n\n\n### Alternate Models\n\n::: {.cell}\n\n```{.r .cell-code}\n# Linear regression\nlm2<-lm(lifesat~car_fac*ptqual+type*ptqual+walkrate+ hhincscale+age+educ+poc+male, data=publictransit)\n# Ordinal Logistic Regression\nlogit2<-polr(qol~car_fac*ptqual+type*ptqual+walk_fac+ hhincscale+age+educ+poc+male, data=publictransit,method=\"logistic\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n```\n:::\n\n```{.r .cell-code}\n# Linear regression for quality of life variable\npublictransit$qol_num<-as.numeric(publictransit$qol)\nlm_qol<-lm(qol_num~hhveh*ptqual+type*ptqual+walkrate+ hhincscale+age+educ+poc+male, data=publictransit)\n```\n:::\n\n### Tables for Comparison\n\n::: {.cell}\n\n```{.r .cell-code}\nlmcomp<-stargazer(lm1,lm2, type=\"text\",\n          dep.var.labels=c(\"Satisfaction with Life\"),\n           covariate.labels=c(\"# of cars in household (numeric)\",\n                              \" 1 car\",\n                               \"2 cars\",\n                              \"3 cars\",\n                              \"Public Transit Quality (PTQ)-Level 1 (reference:0)\",\n                               \"PTQ Level 2\",\n                               \"PTQ Level 3\",\n                               \"PTQ Level 4\",\n                                \"PTQ Level 5\",\n                                \"Urban Cluster (reference:Rural)\",\n                                 \"Urban(reference:Rural)\",\n                                 \"Walkability Level 2 (reference:1)\",\n                                  \"Walkability Level 3\",\n                                   \"Walkability Level 4\",\n                                   \"Walkability Level 5\",\n                                    \"Walkability Rate (numeric)\",\n                                    \"Household Income\",\n                                    \"Age\",\n                                  \"Education\",\n                                \"Race (0=white,1=person of colour)\",\n                                   \"Gender(0=female,1=male)\",\n                             \"# of cars in household:PTQ Level 1\",\n                            \" # of cars in household:PTQ Level 2\",\n                            \"# of cars in household:PTQ Level 3\",\n                            \"# of cars in household:PTQ Level 4\",\n                            \"# of cars in household:PTQ Level 5\",\n                            \" 1 car: PTQ Level 1\", \n                            \" 2 cars: PTQ Level 1\", \n                            \" 3 cars: PTQ Level 1\", \n                            \" 1 car: PTQ Level 2\", \n                            \" 2 cars: PTQ Level 2\", \n                            \" 3 cars: PTQ Level 2\",\n                            \" 1 car: PTQ Level 3\", \n                            \" 2 cars: PTQ Level 3\", \n                            \" 3 cars: PTQ Level 3\",\n                            \" 1 car: PTQ Level 4\", \n                            \" 2 cars: PTQ Level 4\", \n                            \" 3 cars: PTQ Level 4\",\n                            \" 1 car: PTQ Level 5\", \n                            \" 2 cars: PTQ Level 5\", \n                            \" 3 cars: PTQ Level 5\",\n                            \"PTQ Level 1:Urban Cluster\",\n                            \"PTQ Level 2:Urban Cluster\",\n                            \"PTQ Level 3:Urban Cluster\",\n                            \"PTQ Level 4:Urban Cluster\",\n                            \"PTQ Level 5:Urban Cluster\",\n                            \"PTQ Level 1:Urban\",\n                            \"PTQ Level 2:Urban\",\n                            \"PTQ Level 3:Urban\",\n                            \"PTQ Level 4:Urban\",\n                            \"PTQ Level 5:Urban\"), single.row=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n==================================================================================================\n                                                                 Dependent variable:              \n                                                   -----------------------------------------------\n                                                               Satisfaction with Life             \n                                                             (1)                     (2)          \n--------------------------------------------------------------------------------------------------\n# of cars in household (numeric)                       0.238* (0.130)                             \n1 car                                                                          -0.613 (0.647)     \n2 cars                                                                         -0.792 (0.642)     \n3 cars                                                                         -0.048 (0.653)     \nPublic Transit Quality (PTQ)-Level 1 (reference:0)      0.482 (1.043)          -0.436 (1.643)     \nPTQ Level 2                                            -0.246 (0.749)          -0.364 (1.206)     \nPTQ Level 3                                            -0.086 (0.750)          -0.547 (1.157)     \nPTQ Level 4                                             0.581 (0.891)          -0.858 (1.368)     \nPTQ Level 5                                             2.200 (1.538)           1.552 (1.877)     \nUrban Cluster (reference:Rural)                         0.024 (0.215)           0.025 (0.214)     \nUrban(reference:Rural)                                  0.834 (1.318)           1.067 (1.318)     \nWalkability Level 2 (reference:1)                      -0.060 (0.273)                             \nWalkability Level 3                                     0.200 (0.254)                             \nWalkability Level 4                                     0.340 (0.261)                             \nWalkability Level 5                                   1.013*** (0.310)                            \nWalkability Rate (numeric)                                                    0.218*** (0.063)    \nHousehold Income                                      0.206*** (0.043)        0.212*** (0.043)    \nAge                                                   0.312*** (0.043)        0.319*** (0.043)    \nEducation                                              -0.002 (0.049)          -0.001 (0.050)     \nRace (0=white,1=person of colour)                       0.314 (0.224)           0.278 (0.227)     \nGender(0=female,1=male)                               -0.463*** (0.130)       -0.491*** (0.130)   \n# of cars in household:PTQ Level 1                      0.130 (0.328)                             \n# of cars in household:PTQ Level 2                      0.270 (0.262)                             \n# of cars in household:PTQ Level 3                     -0.040 (0.204)                             \n# of cars in household:PTQ Level 4                     -0.056 (0.243)                             \n# of cars in household:PTQ Level 5                     -0.423 (0.397)                             \n1 car: PTQ Level 1                                                              1.205 (1.534)     \n2 cars: PTQ Level 1                                                             1.247 (1.532)     \n3 cars: PTQ Level 1                                                             1.340 (1.529)     \n1 car: PTQ Level 2                                                             -0.034 (1.209)     \n2 cars: PTQ Level 2                                                             1.049 (1.169)     \n3 cars: PTQ Level 2                                                             0.798 (1.191)     \n1 car: PTQ Level 3                                                             -0.171 (1.090)     \n2 cars: PTQ Level 3                                                             0.911 (1.073)     \n3 cars: PTQ Level 3                                                            -0.161 (1.082)     \n1 car: PTQ Level 4                                                              1.027 (1.168)     \n2 cars: PTQ Level 4                                                             1.623 (1.157)     \n3 cars: PTQ Level 4                                                             0.674 (1.179)     \n1 car: PTQ Level 5                                                              0.273 (1.312)     \n2 cars: PTQ Level 5                                                             0.315 (1.352)     \n3 cars: PTQ Level 5                                                            -0.300 (1.584)     \nPTQ Level 1:Urban Cluster                              -1.001 (0.801)          -1.092 (0.802)     \nPTQ Level 2:Urban Cluster                              -0.337 (0.595)          -0.405 (0.600)     \nPTQ Level 3:Urban Cluster                               0.141 (0.668)           0.236 (0.670)     \nPTQ Level 4:Urban Cluster                              -0.079 (0.807)           0.073 (0.811)     \nPTQ Level 5:Urban Cluster                              -1.224 (1.378)          -1.343 (1.426)     \nPTQ Level 1:Urban                                      -0.854 (1.986)          -1.079 (1.982)     \nPTQ Level 2:Urban                                      -0.449 (1.639)          -0.859 (1.649)     \nPTQ Level 3:Urban                                      -1.374 (1.637)          -1.613 (1.640)     \nPTQ Level 4:Urban                                      -0.950 (1.645)          -0.827 (1.658)     \nPTQ Level 5:Urban                                      -2.642 (2.014)          -2.933 (2.080)     \nConstant                                              4.564*** (0.461)        5.063*** (0.716)    \n--------------------------------------------------------------------------------------------------\nObservations                                                 861                     861          \nR2                                                          0.151                   0.164         \nAdjusted R2                                                 0.119                   0.122         \nResidual Std. Error                                   1.840 (df = 828)        1.836 (df = 819)    \nF Statistic                                        4.615*** (df = 32; 828) 3.910*** (df = 41; 819)\n==================================================================================================\nNote:                                                                  *p<0.1; **p<0.05; ***p<0.01\n```\n:::\n\n```{.r .cell-code}\n#cat(lmcomp, file = \"output_lmcomp.html\")\n\nlogitcomp1<-stargazer(logit2,logit5,type=\"text\",\n          dep.var.labels = c(\"Satisfaction with Quality of Life\"),\n          covariate.labels=c(\" 1 car\",\n                               \"2 cars\",\n                              \"3 cars\",\n                             \"# of cars in household\",\n                              \"Public Transit Quality (PTQ)-Level 1 (reference:0)\",\n                               \"PTQ Level 2\",\n                               \"PTQ Level 3\",\n                               \"PTQ Level 4\",\n                                \"PTQ Level 5\",\n                             \"Urban Cluster (reference:Rural)\",\n                                 \"Urban(reference:Rural)\",\n                             \"Walkability Level 2 (reference:1)\",\n                                  \"Walkability Level 3\",\n                                   \"Walkability Level 4\",\n                                   \"Walkability Level 5\",\n                                 \"Walkability Rate\",\n                                    \"Household Income\",\n                                    \"Age\",\n                                  \"Education\",\n                                \"Race (0=white,1=person of colour)\",\n                                   \"Gender(0=female,1=male)\",\n                              \" 1 car: PTQ Level 1\", \n                            \" 2 cars: PTQ Level 1\", \n                            \" 3 cars: PTQ Level 1\", \n                            \" 1 car: PTQ Level 2\", \n                            \" 2 cars: PTQ Level 2\", \n                            \" 3 cars: PTQ Level 2\",\n                            \" 1 car: PTQ Level 3\", \n                            \" 2 cars: PTQ Level 3\", \n                            \" 3 cars: PTQ Level 3\",\n                            \" 1 car: PTQ Level 4\", \n                            \" 2 cars: PTQ Level 4\", \n                            \" 3 cars: PTQ Level 4\",\n                            \" 1 car: PTQ Level 5\", \n                            \" 2 cars: PTQ Level 5\", \n                            \" 3 cars: PTQ Level 5\",\n                             \"# of cars in household:PTQ Level 1\",\n                            \" # of cars in household:PTQ Level 2\",\n                            \"# of cars in household:PTQ Level 3\",\n                            \"# of cars in household:PTQ Level 4\",\n                            \"# of cars in household:PTQ Level 5\",\n                            \"PTQ Level 1:Urban Cluster\",\n                            \"PTQ Level 2:Urban Cluster\",\n                            \"PTQ Level 3:Urban Cluster\",\n                            \"PTQ Level 4:Urban Cluster\",\n                            \"PTQ Level 5:Urban Cluster\",\n                            \"PTQ Level 1:Urban\",\n                            \"PTQ Level 2:Urban\",\n                            \"PTQ Level 3:Urban\",\n                            \"PTQ Level 4:Urban\",\n                            \"PTQ Level 5:Urban\"), single.row=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n========================================================================================\n                                                            Dependent variable:         \n                                                   -------------------------------------\n                                                     Satisfaction with Quality of Life  \n                                                          (1)                (2)        \n----------------------------------------------------------------------------------------\n1 car                                                -1.074 (0.777)                     \n2 cars                                               -0.612 (0.774)                     \n3 cars                                               -0.329 (0.783)                     \n# of cars in household                                                 0.273** (0.136)  \nPublic Transit Quality (PTQ)-Level 1 (reference:0)   1.743 (1.872)      0.215 (1.137)   \nPTQ Level 2                                          -0.320 (1.216)     1.493* (0.763)  \nPTQ Level 3                                          -0.006 (1.223)     0.759 (0.743)   \nPTQ Level 4                                          0.733 (1.475)     1.879** (0.925)  \nPTQ Level 5                                        10.607*** (1.122)  12.457*** (0.645) \nUrban Cluster (reference:Rural)                      0.291 (0.229)      0.253 (0.225)   \nUrban(reference:Rural)                               -0.760 (1.158)     -0.712 (1.149)  \nWalkability Level 2 (reference:1)                   0.578** (0.280)                     \nWalkability Level 3                                 1.106*** (0.265)                    \nWalkability Level 4                                 1.534*** (0.277)                    \nWalkability Level 5                                 2.608*** (0.339)                    \nWalkability Rate                                                       0.587*** (0.068) \nHousehold Income                                    0.132*** (0.045)   0.139*** (0.044) \nAge                                                 0.242*** (0.046)   0.226*** (0.045) \nEducation                                            0.070 (0.052)      0.052 (0.051)   \nRace (0=white,1=person of colour)                    -0.285 (0.240)     -0.265 (0.236)  \nGender(0=female,1=male)                             -0.266* (0.136)    -0.237* (0.133)  \n1 car: PTQ Level 1                                   -0.291 (1.781)                     \n2 cars: PTQ Level 1                                  -2.248 (1.753)                     \n3 cars: PTQ Level 1                                  -0.043 (1.764)                     \n1 car: PTQ Level 2                                   1.796 (1.217)                      \n2 cars: PTQ Level 2                                  1.020 (1.167)                      \n3 cars: PTQ Level 2                                  0.282 (1.193)                      \n1 car: PTQ Level 3                                   0.808 (1.177)                      \n2 cars: PTQ Level 3                                  0.630 (1.161)                      \n3 cars: PTQ Level 3                                  0.531 (1.169)                      \n1 car: PTQ Level 4                                   1.109 (1.276)                      \n2 cars: PTQ Level 4                                  0.452 (1.260)                      \n3 cars: PTQ Level 4                                  0.202 (1.284)                      \n1 car: PTQ Level 5                                   0.541 (1.589)                      \n2 cars: PTQ Level 5                                  -0.004 (1.628)                     \n3 cars: PTQ Level 5                                  -1.096 (1.928)                     \n# of cars in household:PTQ Level 1                                      0.087 (0.353)   \n# of cars in household:PTQ Level 2                                     -0.476* (0.264)  \n# of cars in household:PTQ Level 3                                      -0.078 (0.210)  \n# of cars in household:PTQ Level 4                                      -0.347 (0.254)  \n# of cars in household:PTQ Level 5                                      -0.493 (0.441)  \nPTQ Level 1:Urban Cluster                           -1.729** (0.821)    -1.188 (0.852)  \nPTQ Level 2:Urban Cluster                            -0.644 (0.628)     -0.553 (0.612)  \nPTQ Level 3:Urban Cluster                            -0.912 (0.666)     -0.900 (0.655)  \nPTQ Level 4:Urban Cluster                            -1.024 (0.850)     -0.985 (0.835)  \nPTQ Level 5:Urban Cluster                          -10.211*** (0.686) -11.113*** (0.537)\nPTQ Level 1:Urban                                    2.072 (2.070)      1.690 (1.944)   \nPTQ Level 2:Urban                                    -0.743 (1.483)     -0.746 (1.457)  \nPTQ Level 3:Urban                                    0.500 (1.502)      0.420 (1.490)   \nPTQ Level 4:Urban                                    0.326 (1.572)      0.342 (1.540)   \nPTQ Level 5:Urban                                  -10.859*** (1.067) -11.738*** (0.932)\n----------------------------------------------------------------------------------------\nObservations                                              861                861        \n========================================================================================\nNote:                                                        *p<0.1; **p<0.05; ***p<0.01\n```\n:::\n\n```{.r .cell-code}\nlogitcomp2<-stargazer(logit5,lm_qol, type=\"text\",\n          dep.var.labels = c(\"Satisfaction with Quality of Life\"),\n          covariate.labels=c(\"# of cars in household\",\n                              \"Public Transit Quality (PTQ)-Level 1 (reference:0)\",\n                               \"PTQ Level 2\",\n                               \"PTQ Level 3\",\n                               \"PTQ Level 4\",\n                                \"PTQ Level 5\",\n                             \"Urban Cluster (reference:Rural)\",\n                                 \"Urban(reference:Rural)\",\n                                 \"Walkability Rate\",\n                                    \"Household Income\",\n                                    \"Age\",\n                                  \"Education\",\n                                \"Race (0=white,1=person of colour)\",\n                                   \"Gender(0=female,1=male)\",\n                             \"# of cars in household:PTQ Level 1\",\n                            \" # of cars in household:PTQ Level 2\",\n                            \"# of cars in household:PTQ Level 3\",\n                            \"# of cars in household:PTQ Level 4\",\n                            \"# of cars in household:PTQ Level 5\",\n                            \"PTQ Level 1:Urban Cluster\",\n                            \"PTQ Level 2:Urban Cluster\",\n                            \"PTQ Level 3:Urban Cluster\",\n                            \"PTQ Level 4:Urban Cluster\",\n                            \"PTQ Level 5:Urban Cluster\",\n                            \"PTQ Level 1:Urban\",\n                            \"PTQ Level 2:Urban\",\n                            \"PTQ Level 3:Urban\",\n                            \"PTQ Level 4:Urban\",\n                            \"PTQ Level 5:Urban\"), single.row=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n============================================================================================================\n                                                                      Dependent variable:                   \n                                                   ---------------------------------------------------------\n                                                   Satisfaction with Quality of Life         qol_num        \n                                                                ordered                        OLS          \n                                                               logistic                                     \n                                                                  (1)                          (2)          \n------------------------------------------------------------------------------------------------------------\n# of cars in household                                      0.273** (0.136)              0.125** (0.063)    \nPublic Transit Quality (PTQ)-Level 1 (reference:0)           0.215 (1.137)                0.046 (0.506)     \nPTQ Level 2                                                 1.493* (0.763)               0.678* (0.363)     \nPTQ Level 3                                                  0.759 (0.743)                0.521 (0.364)     \nPTQ Level 4                                                 1.879** (0.925)              0.858** (0.433)    \nPTQ Level 5                                                12.457*** (0.645)              1.169 (0.747)     \nUrban Cluster (reference:Rural)                              0.253 (0.225)                0.104 (0.104)     \nUrban(reference:Rural)                                      -0.712 (1.149)               -0.271 (0.640)     \nWalkability Rate                                           0.587*** (0.068)             0.260*** (0.030)    \nHousehold Income                                           0.139*** (0.044)             0.069*** (0.021)    \nAge                                                        0.226*** (0.045)             0.108*** (0.021)    \nEducation                                                    0.052 (0.051)                0.021 (0.024)     \nRace (0=white,1=person of colour)                           -0.265 (0.236)               -0.164 (0.109)     \nGender(0=female,1=male)                                     -0.237* (0.133)              -0.093 (0.063)     \n# of cars in household:PTQ Level 1                           0.087 (0.353)                0.075 (0.160)     \n# of cars in household:PTQ Level 2                          -0.476* (0.264)              -0.213* (0.127)    \n# of cars in household:PTQ Level 3                          -0.078 (0.210)               -0.078 (0.099)     \n# of cars in household:PTQ Level 4                          -0.347 (0.254)               -0.143 (0.118)     \n# of cars in household:PTQ Level 5                          -0.493 (0.441)               -0.205 (0.192)     \nPTQ Level 1:Urban Cluster                                   -1.188 (0.852)               -0.592 (0.389)     \nPTQ Level 2:Urban Cluster                                   -0.553 (0.612)               -0.236 (0.289)     \nPTQ Level 3:Urban Cluster                                   -0.900 (0.655)               -0.488 (0.325)     \nPTQ Level 4:Urban Cluster                                   -0.985 (0.835)               -0.483 (0.392)     \nPTQ Level 5:Urban Cluster                                 -11.113*** (0.537)             -0.559 (0.669)     \nPTQ Level 1:Urban                                            1.690 (1.944)                0.606 (0.964)     \nPTQ Level 2:Urban                                           -0.746 (1.457)               -0.449 (0.797)     \nPTQ Level 3:Urban                                            0.420 (1.490)                0.124 (0.796)     \nPTQ Level 4:Urban                                            0.342 (1.540)                0.044 (0.798)     \nPTQ Level 5:Urban                                         -11.738*** (0.932)             -0.781 (0.978)     \nConstant                                                                                1.866*** (0.226)    \n------------------------------------------------------------------------------------------------------------\nObservations                                                      861                          861          \nR2                                                                                            0.185         \nAdjusted R2                                                                                   0.157         \nResidual Std. Error                                                                     0.895 (df = 831)    \nF Statistic                                                                          6.521*** (df = 29; 831)\n============================================================================================================\nNote:                                                                            *p<0.1; **p<0.05; ***p<0.01\n```\n:::\n\n```{.r .cell-code}\n#cat(logitcomp, file = \"output_logitcomp.html\")\n# Checking parameters such as AIC, BIC, RMSE\nmodel_performance(logit2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCan't calculate log-loss.\nCan't calculate proper scoring rules for ordinal, multinomial or cumulative link models.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# Indices of model performance\n\nAIC      |     AICc |      BIC | Nagelkerke's R2 |  RMSE | Sigma\n----------------------------------------------------------------\n2096.434 | 2102.227 | 2324.823 |           0.227 | 3.831 | 1.565\n```\n:::\n:::\n\n#### used in the paper but does not render properly\nlogitcomp<-stargazer(logit2,logit5,lm_qol,type=\"text\",\n          dep.var.labels = c(\"Satisfaction with Quality of Life\",\"Satisfaction with Quality of Life\"),\n          covariate.labels=c(\" 1 car\",\n                               \"2 cars\",\n                              \"3 cars\",\n                             \"# of cars in household\",\n                              \"Public Transit Quality (PTQ)-Level 1 (reference:0)\",\n                               \"PTQ Level 2\",\n                               \"PTQ Level 3\",\n                               \"PTQ Level 4\",\n                                \"PTQ Level 5\",\n                             \"Urban Cluster (reference:Rural)\",\n                                 \"Urban(reference:Rural)\",\n                             \"Walkability Level 2 (reference:1)\",\n                                  \"Walkability Level 3\",\n                                   \"Walkability Level 4\",\n                                   \"Walkability Level 5\",\n                                 \"Walkability Rate\",\n                                    \"Household Income\",\n                                    \"Age\",\n                                  \"Education\",\n                                \"Race (0=white,1=person of colour)\",\n                                   \"Gender(0=female,1=male)\",\n                              \" 1 car: PTQ Level 1\", \n                            \" 2 cars: PTQ Level 1\", \n                            \" 3 cars: PTQ Level 1\", \n                            \" 1 car: PTQ Level 2\", \n                            \" 2 cars: PTQ Level 2\", \n                            \" 3 cars: PTQ Level 2\",\n                            \" 1 car: PTQ Level 3\", \n                            \" 2 cars: PTQ Level 3\", \n                            \" 3 cars: PTQ Level 3\",\n                            \" 1 car: PTQ Level 4\", \n                            \" 2 cars: PTQ Level 4\", \n                            \" 3 cars: PTQ Level 4\",\n                            \" 1 car: PTQ Level 5\", \n                            \" 2 cars: PTQ Level 5\", \n                            \" 3 cars: PTQ Level 5\",\n                             \"# of cars in household:PTQ Level 1\",\n                            \" # of cars in household:PTQ Level 2\",\n                            \"# of cars in household:PTQ Level 3\",\n                            \"# of cars in household:PTQ Level 4\",\n                            \"# of cars in household:PTQ Level 5\",\n                            \"PTQ Level 1:Urban Cluster\",\n                            \"PTQ Level 2:Urban Cluster\",\n                            \"PTQ Level 3:Urban Cluster\",\n                            \"PTQ Level 4:Urban Cluster\",\n                            \"PTQ Level 5:Urban Cluster\",\n                            \"PTQ Level 1:Urban\",\n                            \"PTQ Level 2:Urban\",\n                            \"PTQ Level 3:Urban\",\n                            \"PTQ Level 4:Urban\",\n                            \"PTQ Level 5:Urban\"), single.row=TRUE)\n\n## Results for the Final Models\n## Linear Regression with Interaction Effects\n\n::: {.cell}\n\n```{.r .cell-code}\nlm1_table<-stargazer(lm1,type=\"text\",\n          dep.var.labels=c(\"Satisfaction with Life\"),\n           covariate.labels=c(\"# of cars in household\",\n                              \"Public Transit Quality (PTQ)-Level 1 (reference:0)\",\n                               \"PTQ Level 2\",\n                               \"PTQ Level 3\",\n                               \"PTQ Level 4\",\n                                \"PTQ Level 5\",\n                                \"Urban Cluster (reference:Rural)\",\n                                 \"Urban(reference:Rural)\",\n                                 \"Walkability Level 2 (reference:1)\",\n                                  \"Walkability Level 3\",\n                                   \"Walkability Level 4\",\n                                   \"Walkability Level 5\",\n                                    \"Household Income\",\n                                    \"Age\",\n                                  \"Education\",\n                                \"Race (0=white,1=person of colour)\",\n                                   \"Gender(0=female,1=male)\",\n                             \"# of cars in household:PTQ Level 1\",\n                            \" # of cars in household:PTQ Level 2\",\n                            \"# of cars in household:PTQ Level 3\",\n                            \"# of cars in household:PTQ Level 4\",\n                            \"# of cars in household:PTQ Level 5\",\n                            \"PTQ Level 1:Urban Cluster\",\n                            \"PTQ Level 2:Urban Cluster\",\n                            \"PTQ Level 3:Urban Cluster\",\n                            \"PTQ Level 4:Urban Cluster\",\n                            \"PTQ Level 5:Urban Cluster\",\n                            \"PTQ Level 1:Urban\",\n                            \"PTQ Level 2:Urban\",\n                            \"PTQ Level 3:Urban\",\n                            \"PTQ Level 4:Urban\",\n                            \"PTQ Level 5:Urban\"), single.row=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n==============================================================================\n                                                       Dependent variable:    \n                                                   ---------------------------\n                                                     Satisfaction with Life   \n------------------------------------------------------------------------------\n# of cars in household                                   0.238* (0.130)       \nPublic Transit Quality (PTQ)-Level 1 (reference:0)        0.482 (1.043)       \nPTQ Level 2                                              -0.246 (0.749)       \nPTQ Level 3                                              -0.086 (0.750)       \nPTQ Level 4                                               0.581 (0.891)       \nPTQ Level 5                                               2.200 (1.538)       \nUrban Cluster (reference:Rural)                           0.024 (0.215)       \nUrban(reference:Rural)                                    0.834 (1.318)       \nWalkability Level 2 (reference:1)                        -0.060 (0.273)       \nWalkability Level 3                                       0.200 (0.254)       \nWalkability Level 4                                       0.340 (0.261)       \nWalkability Level 5                                     1.013*** (0.310)      \nHousehold Income                                        0.206*** (0.043)      \nAge                                                     0.312*** (0.043)      \nEducation                                                -0.002 (0.049)       \nRace (0=white,1=person of colour)                         0.314 (0.224)       \nGender(0=female,1=male)                                 -0.463*** (0.130)     \n# of cars in household:PTQ Level 1                        0.130 (0.328)       \n# of cars in household:PTQ Level 2                        0.270 (0.262)       \n# of cars in household:PTQ Level 3                       -0.040 (0.204)       \n# of cars in household:PTQ Level 4                       -0.056 (0.243)       \n# of cars in household:PTQ Level 5                       -0.423 (0.397)       \nPTQ Level 1:Urban Cluster                                -1.001 (0.801)       \nPTQ Level 2:Urban Cluster                                -0.337 (0.595)       \nPTQ Level 3:Urban Cluster                                 0.141 (0.668)       \nPTQ Level 4:Urban Cluster                                -0.079 (0.807)       \nPTQ Level 5:Urban Cluster                                -1.224 (1.378)       \nPTQ Level 1:Urban                                        -0.854 (1.986)       \nPTQ Level 2:Urban                                        -0.449 (1.639)       \nPTQ Level 3:Urban                                        -1.374 (1.637)       \nPTQ Level 4:Urban                                        -0.950 (1.645)       \nPTQ Level 5:Urban                                        -2.642 (2.014)       \nConstant                                                4.564*** (0.461)      \n------------------------------------------------------------------------------\nObservations                                                   861            \nR2                                                            0.151           \nAdjusted R2                                                   0.119           \nResidual Std. Error                                     1.840 (df = 828)      \nF Statistic                                          4.615*** (df = 32; 828)  \n==============================================================================\nNote:                                              *p<0.1; **p<0.05; ***p<0.01\n```\n:::\n\n```{.r .cell-code}\n#cat(lm1_table, file = \"output.html\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculating predicted values for walkability and number of vehicles owned\npred_ols<-ggpredict(lm1, terms=\"walk_fac\")\npred_ols_car<-ggpredict(lm1, terms=\"hhveh\")\n#pred_ols\n#pred_ols_car\n# Graph for Number of Vehicles Owned\nggplot(pred_ols_car, aes(x=x, y=predicted)) +\n geom_point() +\n geom_errorbar(aes(ymin=conf.low, ymax=conf.high),\n linewidth=.3, width=.2,position=position_dodge(.9))+\n labs(x = \"Number of Vehicles in the Household\", y = \"Predicted Scores for Life Satisfaction\") +\n  ggtitle(\"Effect of Having Vehicles on Life Satisfaction\") \n```\n\n::: {.cell-output-display}\n![](MekhalaKumar_790QProject_AnnotatedCode_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Graph for Walkability\nggplot(pred_ols, aes(x=x, y=predicted)) +\n geom_point() +\n geom_errorbar(aes(ymin=conf.low, ymax=conf.high),linewidth=.3, width=.2,position=position_dodge(.9))+\n labs(x = \"Perceived Walkability Rate\", y = \"Predicted Scores for Life Satisfaction\",caption=\"Only significant when walkability rate=5\")+\n  ggtitle(\"Perceived Walkability Rate and Life Satisfaction\") \n```\n\n::: {.cell-output-display}\n![](MekhalaKumar_790QProject_AnnotatedCode_files/figure-html/unnamed-chunk-12-2.png){width=672}\n:::\n:::\n\n\n\n## Ordinal Logistic Regression with Interaction Effects\n\n::: {.cell}\n\n```{.r .cell-code}\nlogit5table<-stargazer(logit5,type=\"text\",\n          dep.var.labels=c(\"Satisfaction with Quality of Life in the Community\"),\n           covariate.labels=c(\"# of cars in household\",\n                              \"Public Transit Quality (PTQ)-Level 1 (reference:0)\",\n                               \"PTQ Level 2\",\n                               \"PTQ Level 3\",\n                               \"PTQ Level 4\",\n                                \"PTQ Level 5\",\n                                \"Urban Cluster (reference:Rural)\",\n                                 \"Urban(reference:Rural)\",\n                                 \"Walkability Rate\",\n                                    \"Household Income\",\n                                    \"Age\",\n                                  \"Education\",\n                                \"Race (0=white,1=person of colour)\",\n                                   \"Gender(0=female,1=male)\",\n                             \"# of cars in household:PTQ Level 1\",\n                            \" # of cars in household:PTQ Level 2\",\n                            \"# of cars in household:PTQ Level 3\",\n                            \"# of cars in household:PTQ Level 4\",\n                            \"# of cars in household:PTQ Level 5\",\n                            \"PTQ Level 1:Urban Cluster\",\n                            \"PTQ Level 2:Urban Cluster\",\n                            \"PTQ Level 3:Urban Cluster\",\n                            \"PTQ Level 4:Urban Cluster\",\n                            \"PTQ Level 5:Urban Cluster\",\n                            \"PTQ Level 1:Urban\",\n                            \"PTQ Level 2:Urban\",\n                            \"PTQ Level 3:Urban\",\n                            \"PTQ Level 4:Urban\",\n                            \"PTQ Level 5:Urban\"), single.row=TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n=====================================================================================================\n                                                                  Dependent variable:                \n                                                   --------------------------------------------------\n                                                   Satisfaction with Quality of Life in the Community\n-----------------------------------------------------------------------------------------------------\n# of cars in household                                              0.273** (0.136)                  \nPublic Transit Quality (PTQ)-Level 1 (reference:0)                   0.215 (1.137)                   \nPTQ Level 2                                                          1.493* (0.763)                  \nPTQ Level 3                                                          0.759 (0.743)                   \nPTQ Level 4                                                         1.879** (0.925)                  \nPTQ Level 5                                                        12.457*** (0.645)                 \nUrban Cluster (reference:Rural)                                      0.253 (0.225)                   \nUrban(reference:Rural)                                               -0.712 (1.149)                  \nWalkability Rate                                                    0.587*** (0.068)                 \nHousehold Income                                                    0.139*** (0.044)                 \nAge                                                                 0.226*** (0.045)                 \nEducation                                                            0.052 (0.051)                   \nRace (0=white,1=person of colour)                                    -0.265 (0.236)                  \nGender(0=female,1=male)                                             -0.237* (0.133)                  \n# of cars in household:PTQ Level 1                                   0.087 (0.353)                   \n# of cars in household:PTQ Level 2                                  -0.476* (0.264)                  \n# of cars in household:PTQ Level 3                                   -0.078 (0.210)                  \n# of cars in household:PTQ Level 4                                   -0.347 (0.254)                  \n# of cars in household:PTQ Level 5                                   -0.493 (0.441)                  \nPTQ Level 1:Urban Cluster                                            -1.188 (0.852)                  \nPTQ Level 2:Urban Cluster                                            -0.553 (0.612)                  \nPTQ Level 3:Urban Cluster                                            -0.900 (0.655)                  \nPTQ Level 4:Urban Cluster                                            -0.985 (0.835)                  \nPTQ Level 5:Urban Cluster                                          -11.113*** (0.537)                \nPTQ Level 1:Urban                                                    1.690 (1.944)                   \nPTQ Level 2:Urban                                                    -0.746 (1.457)                  \nPTQ Level 3:Urban                                                    0.420 (1.490)                   \nPTQ Level 4:Urban                                                    0.342 (1.540)                   \nPTQ Level 5:Urban                                                  -11.738*** (0.932)                \n-----------------------------------------------------------------------------------------------------\nObservations                                                              861                        \n=====================================================================================================\nNote:                                                                     *p<0.1; **p<0.05; ***p<0.01\n```\n:::\n\n```{.r .cell-code}\n#cat(logit5table, file = \"outputlogit5.html\")\n# Checking parameters such as AIC, BIC, RMSE\nmodel_performance(logit5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCan't calculate log-loss.\nCan't calculate proper scoring rules for ordinal, multinomial or cumulative link models.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# Indices of model performance\n\nAIC      |     AICc |      BIC | Nagelkerke's R2 |  RMSE | Sigma\n----------------------------------------------------------------\n2090.446 | 2093.159 | 2247.463 |           0.203 | 3.831 | 1.560\n```\n:::\n:::\n\n\n## Independent effects- Number of vehicles owned\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculating predicted probabilities\nlogitpred_car<-ggpredict(logit5, terms=c(\"hhveh\"))\n#logitpred_car\n# Selecting only results when quality of life is 1 or 5\nfilt_car<-logitpred_car%>%filter(response.level%in% c(1,5))\n# Graphical representation\nggplot(filt_car, aes(x = x, y = predicted, fill = response.level)) +\n      geom_bar(stat = \"identity\", position = \"dodge\", width = 0.7) +\n      geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width = 0.4, position = position_dodge(width = 0.7)) +\n      theme_minimal(base_size = 13) +\n      labs(x = \"Number of Vehicles in the Household\", y = \"Predicted Probability\", \n           title = \"Predicted Probability for Quality of Life based on Number of Vehicles\") +\n      labs(fill = \"Quality of Life in the Community\") +\n      scale_fill_manual(values = c(\"1\" = \"antiquewhite\", \n                                   \"5\" = \"grey39\"))+\n      theme(legend.position = c(0.05, 0.95), legend.justification = c(0, 1))\n```\n\n::: {.cell-output-display}\n![](MekhalaKumar_790QProject_AnnotatedCode_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n## Independent effects- Perceived walkability rate\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculating predicted probabilities\nlogitpred_walk<-ggpredict(logit5, terms=c(\"walkrate\"))\n#logitpred_walk\n# Selecting only results when quality of life is 1 or 5\nfilt<-logitpred_walk%>%filter(response.level%in% c(1,5))\n# Graphical representation\nggplot(filt, aes(x = x, y = predicted, fill = response.level)) +\n      geom_bar(stat = \"identity\", position = \"dodge\", width = 0.7) +\n      geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width = 0.4, position = position_dodge(width = 0.7)) +\n      theme_minimal(base_size = 13) +\n      labs(x = \"Perceived Walkability Rate\", y = \"Predicted Probability\", \n           title = \"Predicted Probability for Quality of Life based on \\nPerceived Walkability Rate\") +\n      labs(fill = \"Quality of Life in the Community\") +\n      scale_fill_manual(values = c(\"1\" = \"antiquewhite\", \n                                   \"5\" = \"grey39\"))+\n      theme(legend.position = c(0.05, 0.95), legend.justification = c(0, 1))\n```\n\n::: {.cell-output-display}\n![](MekhalaKumar_790QProject_AnnotatedCode_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n## Independent effects- Perceived public transit quality\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculating predicted probabilities\nlogitpred_pt<-ggpredict(logit5, terms=c(\"ptqual\"))\n#logitpred_pt\n# Selecting only results when quality of life is 1 or 5\nfilt2<-logitpred_pt%>%filter(response.level%in% c(1,5))\n# Graphical representation\nggplot(filt2, aes(x = x, y = predicted, fill = response.level)) +\n      geom_bar(stat = \"identity\", position = \"dodge\", width = 0.7) +\n      geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width = 0.4, position = position_dodge(width = 0.7)) +\n      theme_minimal(base_size = 13) +\n      labs(x = \"Perceived Public Transit Quality Rate\", y = \"Predicted Probability\", \n           title = \"Predicted Probability for Quality of Life based on\\nPerceived Public Transit Quality Rate\") +\n      labs(fill = \"Quality of Life in the Community\",caption=\"Significant when Public Transit Quality=5\") +\n      scale_fill_manual(values = c(\"1\" = \"antiquewhite\", \n                                   \"5\" = \"grey39\"))+\n      theme(legend.position = c(0.05, 0.95), legend.justification = c(0, 1))+\n  scale_x_discrete(breaks = c(0,1,2,3,4,5), labels = c(\"No\\n public\\n transit\",\"1\",\"2\",\"3\",\"4\", \"Highest quality\\n of public\\n transit\"))\n```\n\n::: {.cell-output-display}\n![](MekhalaKumar_790QProject_AnnotatedCode_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n## Interaction Effect- Perceived Public Transit Quality Rate and Geographic Region\n\n::: {.cell}\n\n```{.r .cell-code}\n#Calculating predicted probabilites but selecting only 2 levels of perceived public transit quality\npred_logit5_diff<-ggpredict(logit5, terms=c(\"type\", \"ptqual[0,5]\"))\n#pred_logit5_diff\n# Selecting only results when quality of life is 1 or 5\npredl5_diff <- pred_logit5_diff %>%\n    filter(response.level==1|response.level==5)  \n#Graphical representation\nggplot(predl5_diff, aes(x = group, y = predicted, fill = response.level)) +\n      geom_bar(stat = \"identity\",  width = 0.7 , position = position_dodge()) +\n      facet_grid(. ~ x) +  # Create separate panels for each group\n      theme_minimal(base_size = 13) +\n      labs(fill=\"Quality of Life\\nin the\\nCommunity\",x = \"Public Transit Quality Rate \", y = \"Predicted Probability\", \n             title = \"Predicted Probability for Quality of Life based on Geographic Area\\n and Perceived Public Transit Quality\",caption=\"Significant when Public Transit Quality=5\")+\n      geom_errorbar(aes(ymin=conf.low, ymax=conf.high),\n                    linewidth=.3,    # Thinner lines\n                    width=.2, position = position_dodge(width=.7))+\n      scale_fill_manual(values = c(\"1\" = \"antiquewhite\", \n                                   \"5\" = \"grey39\"))+\n  scale_x_discrete(breaks = c(0, 5), labels = c(\"No\\n public\\n transit\", \"Highest quality\\n of public\\n transit\"))\n```\n\n::: {.cell-output-display}\n![](MekhalaKumar_790QProject_AnnotatedCode_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n## References\n\nTexas A&M Transport Institute. (2017). National Community Livabilty Survey. [Dataset]. <https://transit-mobility.tti.tamu.edu/resources/data-from-national-community-livability-survey/>\n\nRatcliffe, M. (2022, December 22). *Redefining urban areas following the 2020 census*. Census.gov. <https://www.census.gov/newsroom/blogs/random-samplings/2022/12/redefining-urban-areas-following-2020-census.html>\n\n## Note\n\n1.  Used ChatGPT to fix an error with geom_text in the graphs.\n2.  Used ChatGPT to figure out how to export stargazer tables. \n\n\n",
    "supporting": [
      "MekhalaKumar_790QProject_AnnotatedCode_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}